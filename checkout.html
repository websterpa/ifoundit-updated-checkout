<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iFoundIt Checkout</title>
  <meta name="description"
    content="Secure your valuables with iFoundIt tags. Single simplified checkout flow for tags, rewards, and recovery contacts.">
</head>

<body class="theme-base">
  <!-- 1. Minimal Header -->
  <header class="secure-header">
    <div class="lock-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>
    </div>
    <span>Secure Checkout</span>
  </header>

  <div class="layout-wrapper">
    <!-- 2. Accordion Stack -->
    <main class="checkout-flow" id="checkout-flow">
      <!-- Steps 1-4 remain here -->
      <!-- STEP 1: Select Your Tags -->
      <div class="step-card active" id="step-1">
        <div class="step-header" onclick="window.accordion.toggle(1)">
          <div>
            <h2 class="step-title">1. Select Your Tags</h2>
            <p class="step-helper">Choose the physical tags you want to attach to your items. You can change this at any
              time.</p>
          </div>
          <div class="checkmark">âœ“</div>
        </div>
        <div class="step-content">
          <div id="tag-types-grid" class="tag-types-grid">
            <!-- Dynamic Content -->
          </div>
        </div>
      </div>

      <!-- STEP 2: Tag Capacity -->
      <div class="step-card locked" id="step-2">
        <div class="step-header" onclick="window.accordion.toggle(2)">
          <div>
            <h2 class="step-title">2. Choose Tag Capacity</h2>
            <p class="step-helper">This sets how many items you can register in your account.</p>
          </div>
          <div class="checkmark">âœ“</div>
        </div>
        <div class="step-content">
          <form id="capacity-form">
            <!-- Capacity options populated here or hardcoded structure compatible with pricing -->
            <fieldset style="border: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 12px;">
              <!-- We will inject these via main.ts or keep structure for JS to hook into -->
              <div id="capacity-options-container"></div>
            </fieldset>
          </form>
        </div>
      </div>

      <!-- STEP 3: Optional Add-ons -->
      <div class="step-card locked" id="step-3">
        <div class="step-header" onclick="window.accordion.toggle(3)">
          <div>
            <h2 class="step-title">3. Optional Add-ons</h2>
            <p class="step-helper">These are optional services that can make returns faster or easier.</p>
          </div>
          <div class="checkmark">âœ“</div>
        </div>
        <div class="step-content">
          <form id="addons-form">
            <div id="addons-container" class="option-grid">
              <!-- Dynamic Content -->
            </div>
          </form>
        </div>
      </div>

      <!-- STEP 4: Secure Payment -->
      <div class="step-card locked" id="step-4">
        <div class="step-header" onclick="window.accordion.toggle(4)">
          <div>
            <h2 class="step-title">4. Secure Payment</h2>
            <p class="step-helper">Youâ€™ll be redirected to Stripe to complete payment securely.</p>
          </div>
          <div class="checkmark">âœ“</div>
        </div>
        <div class="step-content">
          <div class="payment-handoff">
            <p class="trust-text">We never store your card details.</p>
            <div class="trust-badges">
              <!-- Simple placeholders for visual -->
              <span>ðŸ’³ Visa</span>
              <span>ðŸ’³ Mastercard</span>
              <span>ï£¿ Pay</span>
              <span>G Pay</span>
            </div>

            <!-- Review card hidden on desktop step 4 within accordion because it's in sticky sidebar? 
               Actually prompt says "Step 4... acts as a final review". 
               Mobile: Inside accordion. 
               Desktop: Also inside accordion? Or redundant? 
               Prompt: "Desktop... Right column: Sticky order summary... No CTA button inside summary".
               If sticky summary has everything, Step 4 in accordion might look empty if it's just "Redirecting...".
               However, prompt says "Same accordion behaviour as mobile". 
               So Step 4 remains. I will keep the review-card inside Step 4 for now, 
               as removing it might break the "acts as final review" instruction for mixed screen sizes if we hide it via CSS.
               Actually, I can hide .review-card in Step 4 on desktop via CSS if the Sticky Summary covers it.
               But explicit instruction: "Right column... Contents: Order Summary heading... Line items... Final total".
               I will add the separate sticky summary container in HTML.
          -->
            <div class="review-card mobile-only-review">
              <h3>Order Review</h3>
              <div id="final-review-content-mobile">
                <!-- Read only summary (mobile) -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Desktop Sticky Sidebar -->
    <aside class="desktop-summary">
      <div class="summary-card">
        <h3>Order Summary</h3>
        <div id="desktop-summary-content">
          <!-- Dynamic Content Mirror -->
        </div>
        <div class="summary-divider"></div>
        <div class="desktop-total-row">
          <span>Total Due</span>
          <span id="desktop-sticky-total">Â£0.00</span>
        </div>
      </div>
    </aside>
  </div>

  <!-- 3. Sticky Summary Bar -->
  <div class="sticky-footer">
    <div>
      <span class="total-label">Nothing hidden. This is your final total.</span>
      <div class="total-value" id="sticky-total">Â£0.00</div>
    </div>
    <button id="cta-button" class="primary-btn">
      Continue to Capacity
    </button>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>