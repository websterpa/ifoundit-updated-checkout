<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iFoundIt Checkout</title>
  <meta name="description"
    content="Secure your valuables with iFoundIt tags. Single simplified checkout flow for tags, rewards, and recovery contacts.">
</head>

<body class="theme-base">
  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <button class="theme-btn active" data-theme="default" data-theme-name="Midnight Teal"></button>
    <button class="theme-btn" data-theme="ocean" data-theme-name="Ocean Blue"></button>
    <button class="theme-btn" data-theme="steel" data-theme-name="Arctic Steel"></button>
    <button class="theme-btn" data-theme="sunset" data-theme-name="Sunset Pro"></button>
    <button class="theme-btn" data-theme="charcoal" data-theme-name="Charcoal Depths"></button>
  </div>

  <div id="app" class="app-container">
    <header>
      <div class="logo-container">
        <img src="/logo_circle.png" alt="iFoundIt Logo" class="logo">
      </div>
      <div class="header-text">
        <h1 class="title">Configure &amp; Checkout</h1>
        <p class="subtitle">Complete your coverage configuration below</p>
      </div>
    </header>

    <main class="flow-grid">
      <!-- Hero Grid: Entry & Access side-by-side -->
      <!-- Welcome Card -->
      <section class="card" style="grid-column: 1 / -1;">
        <h2 style="font-size: 1.8rem; margin-bottom: 16px;">Welcome to the iFoundIt Online Store</h2>
        <p style="font-size: 1.1rem; line-height: 1.6; color: var(--text-body); max-width: 800px;">
          The iFoundIt 'Essential' plan is included automatically, FREE!. Configure your safeguarding package here
          before checkout. Please note that at least one physical tag is required. You only pay for the tags and
          optional bolt-ons that you choose.
        </p>
      </section>

      <form id="checkout-form">
        <!-- Section 3: Tag Capacity -->
        <section class="card accent-yellow bg-yellow">
          <h2 style="margin-bottom: 8px;">Optional Tag Capacity</h2>
          <p style="margin-bottom: 16px;">How many items do you want to protect?</p>

          <fieldset style="border: none; padding: 0; margin: 0;">
            <legend style="margin-bottom: 12px; font-weight: 600; font-size: 0.9rem; color: var(--text-body);">Tag
              Capacity</legend>

            <label class="radio-label">
              <input type="radio" name="tagCapacity" value="1" checked>
              <span>Minimum 1 tag (Halo) – can be replaced with any other tag</span>
              <span class="price-tag">Required</span>
            </label>

            <label class="radio-label">
              <input type="radio" name="tagCapacity" value="3">
              <span>Up to 3 tags</span>
              <span class="price-tag">£0.99 / year</span>
            </label>

            <label class="radio-label">
              <input type="radio" name="tagCapacity" value="10">
              <span>Up to 10 tags</span>
              <span class="price-tag">£1.99 / year</span>
            </label>

            <label class="radio-label">
              <input type="radio" name="tagCapacity" value="20">
              <span>Up to 20 tags</span>
              <span class="price-tag">£3.99 / year</span>
            </label>

            <div style="margin-top: 12px; font-size: 0.9rem; color: #666; padding-left: 8px;">
              More than 20 tags? <a href="#" style="color: var(--color-dark); font-weight: 600;">Contact Support</a>
            </div>
          </fieldset>
        </section>

        <!-- Section 4: Tag Type Selection (New Mandatory Step) -->
        <section class="card accent-blue bg-blue-dim">
          <div class="section-title">
            <h2>Choose your tags</h2>
            <div class="capacity-counter">
              Selected tags: <span id="current-selection-count">0</span> / <span id="max-capacity-count">1</span>
            </div>
          </div>
          <p style="margin-bottom: 24px;">
            Select the physical tags you want to include in your plan.
            <span id="tag-selection-helper-text"
              style="display: block; font-size: 0.9em; opacity: 0.8; margin-top: 4px;"></span>
          </p>

          <div id="tag-types-grid" class="tag-types-grid">
            <!-- Dynamically populated -->
          </div>
        </section>

        <h2 style="margin: 48px 0 8px; font-size: 1.5rem; color: var(--text-main); font-family: var(--font-heading);">
          Select Your Bolt-Ons</h2>

        <!-- Bolt-ons Grid -->
        <div class="option-grid">

          <!-- Finder Rewards -->
          <section class="card accent-purple bg-purple">
            <h2>Finder Reward Notes</h2>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 16px;">Only used once an item is returned</p>

            <fieldset style="border: none; padding: 0;">
              <label class="radio-label">
                <input type="radio" name="finderRewards" value="0" checked>
                <span>None</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="finderRewards" value="1">
                <span>1 × £20 credit</span>
                <span class="price-tag">£2.99</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="finderRewards" value="2">
                <span>2 × £20 credits</span>
                <span class="price-tag">£3.99</span>
              </label>
            </fieldset>
          </section>

          <!-- Refund Credits -->
          <section class="card accent-red bg-red">
            <h2>Return Credits</h2>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 16px;">Pre-paid return shipping</p>

            <fieldset style="border: none; padding: 0;">
              <label class="radio-label">
                <input type="radio" name="returnCredits" value="0" checked>
                <span>None</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="returnCredits" value="1">
                <span>1 × return</span>
                <span class="price-tag">£3.99</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="returnCredits" value="3">
                <span>3 × returns</span>
                <span class="price-tag">£6.99</span>
              </label>
            </fieldset>
          </section>

          <!-- Additional Contacts -->
          <section class="card accent-orange bg-orange">
            <h2>Additional Contacts</h2>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 16px;">Recovery contacts</p>

            <fieldset style="border: none; padding: 0;">
              <label class="radio-label">
                <input type="radio" name="extraContacts" value="0" checked>
                <span>None (1 free)</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="extraContacts" value="1">
                <span>1 additional</span>
                <span class="price-tag">£0.99</span>
              </label>

              <label class="radio-label">
                <input type="radio" name="extraContacts" value="2">
                <span>2 additional</span>
                <span class="price-tag">£1.99</span>
              </label>
            </fieldset>
          </section>
        </div>
      </form>

      <!-- Order Summary -->
      <section class="card summary-container">
        <h2>Order Summary</h2>
        <div style="margin-top: 16px;">
          <div id="summary-tag-items" class="summary-items-list">
            <!-- Dynamic list of tags -->
          </div>



          <div id="summary-bolt-on-items" class="summary-items-list">
            <!-- Dynamic list of bolt-ons -->
          </div>

          <div class="summary-divider"></div>

          <div class="summary-row">
            <span>Base Plan</span>
            <span id="summary-base-plan-cost">£0.00</span>
          </div>
          <div class="summary-row summary-subtotal">
            <span>Tags Subtotal</span>
            <span id="summary-tags-subtotal">£0.00</span>
          </div>
          <div class="summary-row summary-subtotal">
            <span>Bolt-On Subtotal</span>
            <span id="summary-addons-cost">£0.00</span>
          </div>
          <div class="summary-total-row">
            <span>Total / Year</span>
            <span id="summary-total">£0.00</span>
          </div>
        </div>

        <!-- CTA Button - Below Order Summary -->
        <div class="summary-cta">
          <button id="cta-button" class="cta-button cta-button-full">
            Complete Protection
            <div class="btn-shine"></div>
          </button>
          <div class="secure-icon">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <span>TLS Secured</span>
          </div>
        </div>
      </section>

      <!-- Sticky Footer - Simplified -->
      <div class="summary-card">
        <!-- Logo Section -->
        <div class="footer-brand">
          <img src="/logo_circle.png" alt="iFoundIt" />
        </div>

        <div class="summary-content">
          <div class="total-display">
            <span class="total-label">Total / Year</span>
            <span class="total-amount" id="sticky-total">£0.00</span>
          </div>

          <div class="secure-icon">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <span>TLS Secured</span>
          </div>
        </div>
      </div>

      <section class="footer-flow"
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; opacity: 0.6; margin-top: 24px;">
        <div class="card bg-blue">
          <h3>Payment</h3>
          <small>Secure Stripe</small>
        </div>
        <div class="card bg-green">
          <h3>Completion</h3>
          <small>Instant Activation</small>
        </div>
        <div class="card bg-purple">
          <h3>Dashboard</h3>
          <small>Manage Tags</small>
        </div>
      </section>

    </main>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>